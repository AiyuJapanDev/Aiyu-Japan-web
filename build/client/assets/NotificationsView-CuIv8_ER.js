import{c as w,u as Ce}from"./index-BNeLBswU.js";import{a as d,p as t,t as Ke}from"./chunk-4WY6JWTD-CQ2BrMui.js";import{c as p}from"./utils-CDN07tui.js";import{b as Me,u as Ye}from"./index-CobyQ-6_.js";import{X as Pe}from"./dialog-Sc23x6E5.js";import{S as Ue,v as Qe,j as fe,w as Je,n as Se,q as De,d as Ge,x as Ze,C as qe,u as Y,t as U,B as pe}from"./index-Ce6NvDUG.js";import{c as et,b as ae,e as tt,a as xe}from"./Combination-BRrAW_Vh.js";import{u as st,S as Q,a as J,b as G,c as Z,d as _}from"./select-D1jRWDQg.js";import{P as at}from"./index-B_pwq4tm.js";import{s as E}from"./client-D-irrw7s.js";import{u as rt}from"./useAuth-DROiUoFu.js";import{C as L,a as nt,b as it,c as B}from"./card-SCvgtUFv.js";import{b as ot,B as F}from"./button-B0x8FPUr.js";import{L as ye}from"./ProtectedRoute-DFjb99Eu.js";import{P as ee}from"./package-CQEqUhWv.js";import{C as ct}from"./badge-CCGCsnjh.js";import{C as te}from"./circle-check-big-QBdueTg8.js";import{T as ge}from"./truck-DVkQtnrb.js";const lt=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],dt=w("chevron-left",lt);const ut=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],be=w("circle-x",ut);const mt=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Gs=w("copy",mt);const ht=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Zs=w("credit-card",ht);const ft=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],we=w("dollar-sign",ft);const pt=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],xt=w("ellipsis",pt);const yt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ea=w("file-text",yt);const gt=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],bt=w("funnel",gt);const wt=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],ta=w("house",wt);const vt=[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]],sa=w("package-check",vt);const jt=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Nt=w("refresh-cw",jt);const _t=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],kt=w("shopping-bag",_t);const Ct=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],aa=w("square-pen",Ct);const Mt=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ra=w("triangle-alert",Mt);const Pt=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],na=w("user",Pt);var St=class extends Ue{#t;#a=void 0;#e;#s;constructor(e,s){super(),this.#t=e,this.setOptions(s),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const s=this.options;this.options=this.#t.defaultMutationOptions(e),Qe(this.options,s)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#e,observer:this}),s?.mutationKey&&this.options.mutationKey&&fe(s.mutationKey)!==fe(this.options.mutationKey)?this.reset():this.#e?.state.status==="pending"&&this.#e.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#e?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#n(e)}getCurrentResult(){return this.#a}reset(){this.#e?.removeObserver(this),this.#e=void 0,this.#r(),this.#n()}mutate(e,s){return this.#s=s,this.#e?.removeObserver(this),this.#e=this.#t.getMutationCache().build(this.#t,this.options),this.#e.addObserver(this),this.#e.execute(e)}#r(){const e=this.#e?.state??Je();this.#a={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#n(e){Se.batch(()=>{if(this.#s&&this.hasListeners()){const s=this.#a.variables,a=this.#a.context,n={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,s,a,n),this.#s.onSettled?.(e.data,null,s,a,n)):e?.type==="error"&&(this.#s.onError?.(e.error,s,a,n),this.#s.onSettled?.(void 0,e.error,s,a,n))}this.listeners.forEach(s=>{s(this.#a)})})}};function ve(e,s){const a=De(),[n]=d.useState(()=>new St(a,e));d.useEffect(()=>{n.setOptions(e)},[n,e]);const i=d.useSyncExternalStore(d.useCallback(l=>n.subscribe(Se.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),c=d.useCallback((l,o)=>{n.mutate(l,o).catch(Ge)},[n]);if(i.error&&Ze(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:c,mutateAsync:i.mutate}}function ia({steps:e,className:s}){return t.jsx("div",{className:p("w-full overflow-x-auto mt-5",s),children:t.jsx("div",{className:"flex items-center min-w-fit px-2 py-3",children:e.map((a,n)=>t.jsxs("div",{className:"flex items-center",children:[t.jsxs("div",{className:"flex flex-col items-center min-h-[90px] sm:min-h-[100px]",children:[t.jsx("div",{className:p("flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-full text-xs font-semibold transition-all shrink-0",a.status==="completed"&&"bg-primary text-primary-foreground",a.status==="current"&&"bg-primary/20 text-primary border-2 border-primary",a.status==="upcoming"&&"bg-muted text-muted-foreground border-2 border-border",a.status==="rejected"&&"bg-destructive text-destructive-foreground"),children:a.status==="completed"?t.jsx(Me,{className:"w-3 h-3 sm:w-4 sm:h-4"}):a.status==="rejected"?t.jsx(Pe,{className:"w-3 h-3 sm:w-4 sm:h-4"}):t.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 flex items-center justify-center",children:a.icon})}),t.jsx("span",{className:p("text-[10px] sm:text-xs mt-2 text-center max-w-[60px] sm:max-w-[80px] leading-tight min-h-[2.5em]",a.status==="completed"&&"text-primary font-medium",a.status==="current"&&"text-foreground font-medium",a.status==="upcoming"&&"text-muted-foreground",a.status==="rejected"&&"text-destructive font-medium"),children:a.label})]}),n<e.length-1&&t.jsx("div",{className:"flex items-center mx-1 sm:mx-2",children:t.jsx("div",{className:p("w-8 sm:w-12 h-[2px] relative top-[1px]",e[n+1].status==="completed"||e[n+1].status==="current"||e[n+1].status==="rejected"?"bg-primary":"bg-border"),children:t.jsx(qe,{className:p("absolute -right-2 top-1/2 -translate-y-1/2 w-4 h-4",e[n+1].status==="completed"||e[n+1].status==="current"||e[n+1].status==="rejected"?"text-primary":"text-border")})})})]},n))})})}var $="Checkbox",[Dt]=et($),[qt,re]=Dt($);function Tt(e){const{__scopeCheckbox:s,checked:a,children:n,defaultChecked:i,disabled:c,form:l,name:o,onCheckedChange:h,required:u,value:x="on",internal_do_not_use_render:f}=e,[m,v]=tt({prop:a,defaultProp:i??!1,onChange:h,caller:$}),[y,N]=d.useState(null),[k,g]=d.useState(null),b=d.useRef(!1),q=y?!!l||!!y.closest("form"):!0,T={checked:m,disabled:c,setChecked:v,control:y,setControl:N,name:o,form:l,value:x,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:S(i)?!1:i,isFormControl:q,bubbleInput:k,setBubbleInput:g};return t.jsx(qt,{scope:s,...T,children:Rt(f)?f(T):n})}var Te="CheckboxTrigger",Re=d.forwardRef(({__scopeCheckbox:e,onKeyDown:s,onClick:a,...n},i)=>{const{control:c,value:l,disabled:o,checked:h,required:u,setControl:x,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:v,bubbleInput:y}=re(Te,e),N=Ce(i,x),k=d.useRef(h);return d.useEffect(()=>{const g=c?.form;if(g){const b=()=>f(k.current);return g.addEventListener("reset",b),()=>g.removeEventListener("reset",b)}},[c,f]),t.jsx(ae.button,{type:"button",role:"checkbox","aria-checked":S(h)?"mixed":h,"aria-required":u,"data-state":Oe(h),"data-disabled":o?"":void 0,disabled:o,value:l,...n,ref:N,onKeyDown:xe(s,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:xe(a,g=>{f(b=>S(b)?!0:!b),y&&v&&(m.current=g.isPropagationStopped(),m.current||g.stopPropagation())})})});Re.displayName=Te;var ne=d.forwardRef((e,s)=>{const{__scopeCheckbox:a,name:n,checked:i,defaultChecked:c,required:l,disabled:o,value:h,onCheckedChange:u,form:x,...f}=e;return t.jsx(Tt,{__scopeCheckbox:a,checked:i,defaultChecked:c,disabled:o,required:l,onCheckedChange:u,name:n,form:x,value:h,internal_do_not_use_render:({isFormControl:m})=>t.jsxs(t.Fragment,{children:[t.jsx(Re,{...f,ref:s,__scopeCheckbox:a}),m&&t.jsx(Ee,{__scopeCheckbox:a})]})})});ne.displayName=$;var Fe="CheckboxIndicator",Ie=d.forwardRef((e,s)=>{const{__scopeCheckbox:a,forceMount:n,...i}=e,c=re(Fe,a);return t.jsx(at,{present:n||S(c.checked)||c.checked===!0,children:t.jsx(ae.span,{"data-state":Oe(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:s,style:{pointerEvents:"none",...e.style}})})});Ie.displayName=Fe;var Ae="CheckboxBubbleInput",Ee=d.forwardRef(({__scopeCheckbox:e,...s},a)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:c,defaultChecked:l,required:o,disabled:h,name:u,value:x,form:f,bubbleInput:m,setBubbleInput:v}=re(Ae,e),y=Ce(a,v),N=st(c),k=Ye(n);d.useEffect(()=>{const b=m;if(!b)return;const q=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(q,"checked").set,P=!i.current;if(N!==c&&I){const H=new Event("click",{bubbles:P});b.indeterminate=S(c),I.call(b,S(c)?!1:c),b.dispatchEvent(H)}},[m,N,c,i]);const g=d.useRef(S(c)?!1:c);return t.jsx(ae.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??g.current,required:o,disabled:h,name:u,value:x,form:f,...s,tabIndex:-1,ref:y,style:{...s.style,...k,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Ee.displayName=Ae;function Rt(e){return typeof e=="function"}function S(e){return e==="indeterminate"}function Oe(e){return S(e)?"indeterminate":e?"checked":"unchecked"}const Ft=d.forwardRef(({className:e,...s},a)=>t.jsx(ne,{ref:a,className:p("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:t.jsx(Ie,{className:p("flex items-center justify-center text-current"),children:t.jsx(Me,{className:"h-4 w-4"})})}));Ft.displayName=ne.displayName;const It=d.forwardRef(({className:e,...s},a)=>t.jsx("div",{className:"relative w-full overflow-auto",children:t.jsx("table",{ref:a,className:p("w-full caption-bottom text-sm",e),...s})}));It.displayName="Table";const At=d.forwardRef(({className:e,...s},a)=>t.jsx("thead",{ref:a,className:p("[&_tr]:border-b",e),...s}));At.displayName="TableHeader";const Et=d.forwardRef(({className:e,...s},a)=>t.jsx("tbody",{ref:a,className:p("[&_tr:last-child]:border-0",e),...s}));Et.displayName="TableBody";const Ot=d.forwardRef(({className:e,...s},a)=>t.jsx("tfoot",{ref:a,className:p("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...s}));Ot.displayName="TableFooter";const Wt=d.forwardRef(({className:e,...s},a)=>t.jsx("tr",{ref:a,className:p("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...s}));Wt.displayName="TableRow";const zt=d.forwardRef(({className:e,...s},a)=>t.jsx("th",{ref:a,className:p("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...s}));zt.displayName="TableHead";const Ht=d.forwardRef(({className:e,...s},a)=>t.jsx("td",{ref:a,className:p("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...s}));Ht.displayName="TableCell";const Lt=d.forwardRef(({className:e,...s},a)=>t.jsx("caption",{ref:a,className:p("mt-4 text-sm text-muted-foreground",e),...s}));Lt.displayName="TableCaption";const oa=6048e5,ca=864e5,X=43200,je=1440,Ne=Symbol.for("constructDateFrom");function ie(e,s){return typeof e=="function"?e(s):e&&typeof e=="object"&&Ne in e?e[Ne](s):e instanceof Date?new e.constructor(s):new Date(s)}function D(e,s){return ie(s||e,e)}let Bt={};function Xt(){return Bt}function _e(e){const s=D(e),a=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return a.setUTCFullYear(s.getFullYear()),+e-+a}function oe(e,...s){const a=ie.bind(null,e||s.find(n=>typeof n=="object"));return s.map(a)}function V(e,s){const a=+D(e)-+D(s);return a<0?-1:a>0?1:a}function Vt(e){return ie(e,Date.now())}function $t(e,s,a){const[n,i]=oe(a?.in,e,s),c=n.getFullYear()-i.getFullYear(),l=n.getMonth()-i.getMonth();return c*12+l}function Kt(e){return s=>{const n=(e?Math[e]:Math.trunc)(s);return n===0?0:n}}function Yt(e,s){return+D(e)-+D(s)}function Ut(e,s){const a=D(e,s?.in);return a.setHours(23,59,59,999),a}function Qt(e,s){const a=D(e,s?.in),n=a.getMonth();return a.setFullYear(a.getFullYear(),n+1,0),a.setHours(23,59,59,999),a}function Jt(e,s){const a=D(e,s?.in);return+Ut(a,s)==+Qt(a,s)}function Gt(e,s,a){const[n,i,c]=oe(a?.in,e,e,s),l=V(i,c),o=Math.abs($t(i,c));if(o<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-l*o);let h=V(i,c)===-l;Jt(n)&&o===1&&V(n,c)===1&&(h=!1);const u=l*(o-+h);return u===0?0:u}function Zt(e,s,a){const n=Yt(e,s)/1e3;return Kt(a?.roundingMethod)(n)}const es={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ts=(e,s,a)=>{let n;const i=es[e];return typeof i=="string"?n=i:s===1?n=i.one:n=i.other.replace("{{count}}",s.toString()),a?.addSuffix?a.comparison&&a.comparison>0?"in "+n:n+" ago":n};function se(e){return(s={})=>{const a=s.width?String(s.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const ss={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},as={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},rs={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ns={date:se({formats:ss,defaultWidth:"full"}),time:se({formats:as,defaultWidth:"full"}),dateTime:se({formats:rs,defaultWidth:"full"})},is={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},os=(e,s,a,n)=>is[e];function O(e){return(s,a)=>{const n=a?.context?String(a.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,o=a?.width?String(a.width):l;i=e.formattingValues[o]||e.formattingValues[l]}else{const l=e.defaultWidth,o=a?.width?String(a.width):e.defaultWidth;i=e.values[o]||e.values[l]}const c=e.argumentCallback?e.argumentCallback(s):s;return i[c]}}const cs={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ls={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ds={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},us={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ms={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hs={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fs=(e,s)=>{const a=Number(e),n=a%100;if(n>20||n<10)switch(n%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},ps={ordinalNumber:fs,era:O({values:cs,defaultWidth:"wide"}),quarter:O({values:ls,defaultWidth:"wide",argumentCallback:e=>e-1}),month:O({values:ds,defaultWidth:"wide"}),day:O({values:us,defaultWidth:"wide"}),dayPeriod:O({values:ms,defaultWidth:"wide",formattingValues:hs,defaultFormattingWidth:"wide"})};function W(e){return(s,a={})=>{const n=a.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],c=s.match(i);if(!c)return null;const l=c[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(o)?ys(o,f=>f.test(l)):xs(o,f=>f.test(l));let u;u=e.valueCallback?e.valueCallback(h):h,u=a.valueCallback?a.valueCallback(u):u;const x=s.slice(l.length);return{value:u,rest:x}}}function xs(e,s){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&s(e[a]))return a}function ys(e,s){for(let a=0;a<e.length;a++)if(s(e[a]))return a}function gs(e){return(s,a={})=>{const n=s.match(e.matchPattern);if(!n)return null;const i=n[0],c=s.match(e.parsePattern);if(!c)return null;let l=e.valueCallback?e.valueCallback(c[0]):c[0];l=a.valueCallback?a.valueCallback(l):l;const o=s.slice(i.length);return{value:l,rest:o}}}const bs=/^(\d+)(th|st|nd|rd)?/i,ws=/\d+/i,vs={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},js={any:[/^b/i,/^(a|c)/i]},Ns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_s={any:[/1/i,/2/i,/3/i,/4/i]},ks={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cs={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ms={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ps={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ss={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ds={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qs={ordinalNumber:gs({matchPattern:bs,parsePattern:ws,valueCallback:e=>parseInt(e,10)}),era:W({matchPatterns:vs,defaultMatchWidth:"wide",parsePatterns:js,defaultParseWidth:"any"}),quarter:W({matchPatterns:Ns,defaultMatchWidth:"wide",parsePatterns:_s,defaultParseWidth:"any",valueCallback:e=>e+1}),month:W({matchPatterns:ks,defaultMatchWidth:"wide",parsePatterns:Cs,defaultParseWidth:"any"}),day:W({matchPatterns:Ms,defaultMatchWidth:"wide",parsePatterns:Ps,defaultParseWidth:"any"}),dayPeriod:W({matchPatterns:Ss,defaultMatchWidth:"any",parsePatterns:Ds,defaultParseWidth:"any"})},Ts={code:"en-US",formatDistance:ts,formatLong:ns,formatRelative:os,localize:ps,match:qs,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rs(e,s,a){const n=Xt(),i=a?.locale??n.locale??Ts,c=2520,l=V(e,s);if(isNaN(l))throw new RangeError("Invalid time value");const o=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:l}),[h,u]=oe(a?.in,...l>0?[s,e]:[e,s]),x=Zt(u,h),f=(_e(u)-_e(h))/1e3,m=Math.round((x-f)/60);let v;if(m<2)return a?.includeSeconds?x<5?i.formatDistance("lessThanXSeconds",5,o):x<10?i.formatDistance("lessThanXSeconds",10,o):x<20?i.formatDistance("lessThanXSeconds",20,o):x<40?i.formatDistance("halfAMinute",0,o):x<60?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",1,o):m===0?i.formatDistance("lessThanXMinutes",1,o):i.formatDistance("xMinutes",m,o);if(m<45)return i.formatDistance("xMinutes",m,o);if(m<90)return i.formatDistance("aboutXHours",1,o);if(m<je){const y=Math.round(m/60);return i.formatDistance("aboutXHours",y,o)}else{if(m<c)return i.formatDistance("xDays",1,o);if(m<X){const y=Math.round(m/je);return i.formatDistance("xDays",y,o)}else if(m<X*2)return v=Math.round(m/X),i.formatDistance("aboutXMonths",v,o)}if(v=Gt(u,h),v<12){const y=Math.round(m/X);return i.formatDistance("xMonths",y,o)}else{const y=v%12,N=Math.trunc(v/12);return y<3?i.formatDistance("aboutXYears",N,o):y<9?i.formatDistance("overXYears",N,o):i.formatDistance("almostXYears",N+1,o)}}function ke(e,s){return Rs(e,Vt(e),s)}const We=({className:e,...s})=>t.jsx("nav",{role:"navigation","aria-label":"pagination",className:p("mx-auto flex w-full justify-center",e),...s});We.displayName="Pagination";const ze=d.forwardRef(({className:e,...s},a)=>t.jsx("ul",{ref:a,className:p("flex flex-row items-center gap-1",e),...s}));ze.displayName="PaginationContent";const z=d.forwardRef(({className:e,...s},a)=>t.jsx("li",{ref:a,className:p("",e),...s}));z.displayName="PaginationItem";const K=({className:e,isActive:s,size:a="icon",...n})=>t.jsx("a",{"aria-current":s?"page":void 0,className:p(ot({variant:s?"outline":"ghost",size:a}),e),...n});K.displayName="PaginationLink";const He=({className:e,...s})=>t.jsxs(K,{"aria-label":"Go to previous page",size:"default",className:p("gap-1 pl-2.5",e),...s,children:[t.jsx(dt,{className:"h-4 w-4"}),t.jsx("span",{children:"Previous"})]});He.displayName="PaginationPrevious";const Le=({className:e,...s})=>t.jsxs(K,{"aria-label":"Go to next page",size:"default",className:p("gap-1 pr-2.5",e),...s,children:[t.jsx("span",{children:"Next"}),t.jsx(qe,{className:"h-4 w-4"})]});Le.displayName="PaginationNext";const Be=({className:e,...s})=>t.jsxs("span",{"aria-hidden":!0,className:p("flex h-9 w-9 items-center justify-center",e),...s,children:[t.jsx(xt,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"More pages"})]});Be.displayName="PaginationEllipsis";const la=()=>{const{user:e}=rt(),s=De(),a=Ke(),[n,i]=d.useState(1),[c,l]=d.useState("all"),[o,h]=d.useState("all"),[u,x]=d.useState("all"),f=15,{data:m}=Y({queryKey:["user-role",e?.id],queryFn:async()=>{if(!e)return null;const{data:r}=await E.from("user_roles").select("role").eq("user_id",e.id).single();return r?.role||"user"},enabled:!!e}),v=m==="admin",y=r=>{const j=["quote_received","order_rejected","payment_confirmed","order_update","quote_approved","quote_rejected","order_issue"],C=["shipping_quote_received","shipping_request_rejected","shipping_payment_confirmed","shipment_sent","shipping_update"],M=["items_at_warehouse"],R=["new_product_request","order_resubmitted","new_shipping_request"];return j.includes(r)?"orders":C.includes(r)?"shipping":M.includes(r)?"warehouse":R.includes(r)?"admin":"other"},N=()=>{const r=new Date;switch(u){case"7days":return new Date(r.setDate(r.getDate()-7)).toISOString();case"30days":return new Date(r.setDate(r.getDate()-30)).toISOString();case"90days":return new Date(r.setDate(r.getDate()-90)).toISOString();case"all":default:return null}},{data:k=0}=Y({queryKey:["notifications","count",e?.id,c,o,u],queryFn:async()=>{if(!e)return 0;let r=E.from("notifications").select("type, read_at, created_at").eq("user_id",e.id);c==="unread"?r=r.is("read_at",null):c==="read"&&(r=r.not("read_at","is",null));const j=N();j&&(r=r.gte("created_at",j));const{data:C,error:M}=await r;if(M)throw M;return o!=="all"&&C?C.filter(R=>y(R.type)===o).length:C?.length||0},enabled:!!e}),{data:g=[],isLoading:b}=Y({queryKey:["notifications",e?.id,n,c,o,u],queryFn:async()=>{if(!e)return[];let r=E.from("notifications").select("*").eq("user_id",e.id);c==="unread"?r=r.is("read_at",null):c==="read"&&(r=r.not("read_at","is",null));const j=N();j&&(r=r.gte("created_at",j)),r=r.order("created_at",{ascending:!1});const{data:C,error:M}=await r;if(M)throw M;let R=C||[];o!=="all"&&(R=R.filter($e=>y($e.type)===o));const he=(n-1)*f,Ve=he+f;return R.slice(he,Ve)},enabled:!!e}),q=ve({mutationFn:async r=>{const{error:j}=await E.from("notifications").update({read_at:new Date().toISOString()}).eq("id",r).eq("user_id",e?.id||"");if(j)throw j},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications"]}),s.invalidateQueries({queryKey:["notifications","unread"]})},onError:()=>{U.error("Failed to mark notification as read")}}),T=ve({mutationFn:async()=>{const{error:r}=await E.from("notifications").update({read_at:new Date().toISOString()}).eq("user_id",e?.id||"").is("read_at",null);if(r)throw r},onSuccess:()=>{s.invalidateQueries({queryKey:["notifications"]}),s.invalidateQueries({queryKey:["notifications","unread"]}),U.success("All notifications marked as read")},onError:()=>{U.error("Failed to mark all as read")}}),I=()=>{l("all"),h("all"),x("all"),i(1)},P=Math.ceil(k/f),H=(n-1)*f+1,Xe=Math.min(H+f-1,k),A=[c!=="all",o!=="all",u!=="all"].filter(Boolean).length,ce=r=>{switch(r){case"quote_received":return t.jsx(we,{className:"h-5 w-5 text-blue-500"});case"order_rejected":return t.jsx(be,{className:"h-5 w-5 text-red-500"});case"payment_confirmed":return t.jsx(te,{className:"h-5 w-5 text-green-500"});case"items_at_warehouse":return t.jsx(ee,{className:"h-5 w-5 text-purple-500"});case"shipping_quote_received":return t.jsx(we,{className:"h-5 w-5 text-cyan-500"});case"shipping_request_rejected":return t.jsx(be,{className:"h-5 w-5 text-orange-500"});case"shipping_payment_confirmed":return t.jsx(te,{className:"h-5 w-5 text-emerald-500"});case"shipment_sent":return t.jsx(ge,{className:"h-5 w-5 text-indigo-500"});case"order_update":return t.jsx(ee,{className:"h-5 w-5 text-primary"});case"shipping_update":return t.jsx(ge,{className:"h-5 w-5 text-primary"});case"quote_approved":return t.jsx(te,{className:"h-5 w-5 text-green-500"});case"quote_rejected":case"order_issue":return t.jsx(ct,{className:"h-5 w-5 text-destructive"});case"new_product_request":return t.jsx(kt,{className:"h-5 w-5 text-blue-500"});case"order_resubmitted":return t.jsx(Nt,{className:"h-5 w-5 text-purple-500"});case"new_shipping_request":return t.jsx(ee,{className:"h-5 w-5 text-teal-500"});default:return t.jsx(pe,{className:"h-5 w-5 text-primary"})}},le=r=>{switch(r){case"quote_received":return"Click here to view order";case"order_rejected":return"Click here to review and resubmit";case"payment_confirmed":return"Click here to view order";case"items_at_warehouse":return"Click here to view warehouse";case"shipping_quote_received":return"Click here to view shipment";case"shipping_request_rejected":return"Click here to review shipment";case"shipping_payment_confirmed":return"Click here to view shipment";case"shipment_sent":return"Click here to track shipment";case"new_product_request":return"Click here to view new order";case"order_resubmitted":return"Click here to review resubmitted order";case"new_shipping_request":return"Click here to process shipping request";default:return"Click here to view details"}},de=async r=>{r.read_at||await q.mutateAsync(r.id),r.order_group_id&&(r.type==="new_product_request"||r.type==="order_resubmitted"?a(`/admin-dashboard?tab=requests&orderId=${r.order_group_id}`):r.type==="new_shipping_request"?a(`/admin-dashboard?tab=shipping-requests&shipmentId=${r.order_group_id}`):r.type==="shipping_quote_received"||r.type==="shipping_request_rejected"||r.type==="shipping_payment_confirmed"||r.type==="shipment_sent"?a(`/user-dashboard?tab=shipping&shipmentId=${r.order_group_id}`):r.type==="items_at_warehouse"?a("/user-dashboard?tab=storage"):a(`/user-dashboard?tab=orders&orderId=${r.order_group_id}`))},ue=g.filter(r=>!r.read_at),me=g.filter(r=>r.read_at);return t.jsxs("div",{className:"space-y-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Notifications"}),t.jsxs(L,{children:[t.jsx(nt,{children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(bt,{className:"h-4 w-4"}),t.jsx(it,{className:"text-base",children:"Filters"}),A>0&&t.jsx("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-0.5 rounded-full",children:A})]})}),t.jsx(B,{children:t.jsxs("div",{className:"flex flex-wrap gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),t.jsxs(Q,{value:c,onValueChange:r=>{l(r),i(1)},children:[t.jsx(J,{children:t.jsx(G,{})}),t.jsxs(Z,{children:[t.jsx(_,{value:"all",children:"All notifications"}),t.jsx(_,{value:"unread",children:"Unread only"}),t.jsx(_,{value:"read",children:"Read only"})]})]})]}),t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),t.jsxs(Q,{value:o,onValueChange:r=>{h(r),i(1)},children:[t.jsx(J,{children:t.jsx(G,{})}),t.jsxs(Z,{children:[t.jsx(_,{value:"all",children:"All types"}),t.jsx(_,{value:"orders",children:"Orders"}),t.jsx(_,{value:"shipping",children:"Shipping"}),t.jsx(_,{value:"warehouse",children:"Warehouse"}),v&&t.jsx(_,{value:"admin",children:"Admin"})]})]})]}),t.jsxs("div",{className:"flex-1 min-w-[200px]",children:[t.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Time"}),t.jsxs(Q,{value:u,onValueChange:r=>{x(r),i(1)},children:[t.jsx(J,{children:t.jsx(G,{})}),t.jsxs(Z,{children:[t.jsx(_,{value:"all",children:"All time"}),t.jsx(_,{value:"7days",children:"Last 7 days"}),t.jsx(_,{value:"30days",children:"Last 30 days"}),t.jsx(_,{value:"90days",children:"Last 90 days"})]})]})]}),A>0&&t.jsx("div",{className:"flex items-end",children:t.jsxs(F,{variant:"ghost",size:"sm",onClick:I,className:"gap-2",children:[t.jsx(Pe,{className:"h-4 w-4"}),"Clear filters"]})})]})})]}),!b&&k>0&&t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 sm:gap-4",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",H,"-",Xe," of ",k," notifications"]}),g.some(r=>!r.read_at)&&t.jsxs(F,{variant:"outline",size:"sm",onClick:()=>T.mutate(),disabled:T.isPending,className:"self-start sm:self-auto",children:[T.isPending&&t.jsx(ye,{className:"mr-2 h-4 w-4 animate-spin"}),"Mark all as read"]})]}),b?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(ye,{className:"h-8 w-8 animate-spin"})}):k===0?t.jsx(L,{children:t.jsxs(B,{className:"p-8 text-center text-muted-foreground",children:[t.jsx(pe,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"text-lg font-medium",children:A>0?"No notifications found":"No notifications yet"}),A>0&&t.jsx(F,{variant:"link",onClick:I,className:"mt-2",children:"Clear filters to see all notifications"})]})}):t.jsxs("div",{className:"space-y-4",children:[ue.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-600 px-2",children:"Unread"}),ue.map(r=>t.jsx(L,{className:"border-l-4 border-l-primary bg-primary/5",children:t.jsx(B,{className:"p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"mt-0.5 flex-shrink-0",children:ce(r.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[t.jsx("p",{className:"text-gray-800 font-semibold break-words flex-1",children:r.message}),t.jsx("div",{className:"h-2 w-2 bg-primary rounded-full flex-shrink-0 mt-2"})]}),t.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:ke(new Date(r.created_at),{addSuffix:!0})}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[t.jsx(F,{size:"sm",onClick:()=>de(r),className:"w-full sm:flex-1 text-xs sm:text-sm",children:t.jsx("span",{className:"truncate",children:le(r.type)})}),t.jsx(F,{variant:"outline",size:"sm",onClick:()=>q.mutate(r.id),disabled:q.isPending,className:"sm:whitespace-nowrap",children:"Mark as read"})]})]})]})})},r.id))]}),me.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h3",{className:"text-sm font-semibold text-gray-600 px-2",children:"Read"}),me.map(r=>t.jsx(L,{className:"opacity-70 hover:opacity-100 transition-opacity",children:t.jsx(B,{className:"p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"mt-0.5 flex-shrink-0",children:ce(r.type)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-gray-600 break-words",children:r.message}),t.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:ke(new Date(r.created_at),{addSuffix:!0})}),t.jsx(F,{size:"sm",variant:"outline",onClick:()=>de(r),className:"w-full text-xs sm:text-sm",children:t.jsx("span",{className:"truncate",children:le(r.type)})})]})]})})},r.id))]}),P>1&&t.jsx("div",{className:"flex justify-center mt-8",children:t.jsx(We,{children:t.jsxs(ze,{children:[t.jsx(z,{children:t.jsx(He,{onClick:()=>i(r=>Math.max(1,r-1)),className:n===1?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:P},(r,j)=>j+1).map(r=>{const j=r===1||r===P||r>=n-1&&r<=n+1,C=r===n-2&&n>3,M=r===n+2&&n<P-2;return C||M?t.jsx(z,{children:t.jsx(Be,{})},r):j?t.jsx(z,{children:t.jsx(K,{onClick:()=>i(r),isActive:n===r,className:"cursor-pointer",children:r})},r):null}),t.jsx(z,{children:t.jsx(Le,{onClick:()=>i(r=>Math.min(P,r+1)),className:n===P?"pointer-events-none opacity-50":"cursor-pointer"})})]})})})]})]})};export{Be as A,Le as B,Gs as C,we as D,bt as F,ta as H,la as N,sa as P,Nt as R,aa as S,ra as T,na as U,Ft as a,ia as b,dt as c,be as d,It as e,At as f,Wt as g,zt as h,Et as i,Ht as j,Zs as k,ea as l,Xt as m,ie as n,oe as o,_e as p,ca as q,oa as r,Ts as s,D as t,ve as u,We as v,ze as w,z as x,He as y,K as z};
