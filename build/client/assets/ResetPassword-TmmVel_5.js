import{w as y,v as N,t as P,a,p as s}from"./chunk-4WY6JWTD-CQ2BrMui.js";import{B as C}from"./button-B0x8FPUr.js";import{C as k,a as S,b as E,c as T}from"./card-SCvgtUFv.js";import{I as p}from"./input-CM33OdNU.js";import{L as h}from"./label-DN8oXECS.js";import{s as I}from"./client-D-irrw7s.js";import{u as L}from"./use-toast-aoUui9pM.js";import{E as w}from"./eye-off-Ckx5ESn6.js";import{E as f}from"./eye-C2ugwyJB.js";import"./index-CwuhT9dy.js";import"./index-BNeLBswU.js";import"./index-B_jtOnfb.js";import"./utils-CDN07tui.js";import"./index-DQ6zQjx3.js";import"./tslib.es6-DcwbYiNs.js";const R=()=>{const[i]=N(),n=P(),{toast:t}=L(),[r,x]=a.useState(""),[c,b]=a.useState(""),[m,u]=a.useState(!1),[d,g]=a.useState(!1),[l,j]=a.useState(!1);a.useEffect(()=>{const e=i.get("access_token"),o=i.get("refresh_token");(!e||!o)&&(t({title:"Invalid reset link",description:"This password reset link is invalid or has expired.",variant:"destructive"}),n("/auth"))},[i,n,t]);const v=async e=>{if(e.preventDefault(),r!==c){t({title:"Passwords don't match",description:"Please make sure both passwords are the same.",variant:"destructive"});return}if(r.length<6){t({title:"Password too short",description:"Password must be at least 6 characters long.",variant:"destructive"});return}u(!0);const{error:o}=await I.auth.updateUser({password:r});o?t({title:"Password update failed",description:o.message,variant:"destructive"}):(t({title:"Password updated!",description:"Your password has been successfully updated."}),n("/")),u(!1)};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center px-4",children:s.jsxs(k,{className:"w-full max-w-md bg-white/90 backdrop-blur-sm border-blue-200 shadow-xl",children:[s.jsxs(S,{className:"text-center",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-300 to-blue-400 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"AJ"})}),s.jsx("span",{className:"font-bold text-xl text-gray-800",children:"AJ"})]}),s.jsx(E,{className:"text-2xl font-bold text-gray-900",children:"Reset Password"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your new password below."})]}),s.jsx(T,{className:"space-y-6",children:s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"password",children:"New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(p,{id:"password",name:"password",type:d?"text":"password",value:r,onChange:e=>x(e.target.value),className:"rounded-lg border-blue-200 focus:border-blue-300 pr-10",placeholder:"Enter new password",required:!0}),s.jsx("button",{type:"button",onClick:()=>g(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:d?s.jsx(w,{className:"h-4 w-4"}):s.jsx(f,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"confirmPassword",children:"Confirm New Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(p,{id:"confirmPassword",name:"confirmPassword",type:l?"text":"password",value:c,onChange:e=>b(e.target.value),className:"rounded-lg border-blue-200 focus:border-blue-300 pr-10",placeholder:"Confirm new password",required:!0}),s.jsx("button",{type:"button",onClick:()=>j(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:l?s.jsx(w,{className:"h-4 w-4"}):s.jsx(f,{className:"h-4 w-4"})})]})]}),s.jsx(C,{type:"submit",className:"w-full bg-blue-300 hover:bg-blue-400 text-white rounded-lg py-2 font-medium",disabled:m,children:m?"Updating...":"Update Password"})]})})]})})},Q=y(R);export{Q as default};
